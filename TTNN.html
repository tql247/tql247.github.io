<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TTNN</title>
	<style>
        body{
            background-color: rgba(247, 247, 247, 0.342);
        }
        
        img {
            border: 1px solid rgba(0, 0, 0, 0.192);
        }
		
        
        
        @media only screen and (max-width: 700px) {
            img {
                width: 100%;
            }
          }
	</style>
</head>
<body>
	
	
    <div id="result" align="center">
    </div>
    <p id="status"></p>

	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
	<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script>
        var url = "https://api.flickr.com/services/rest/";
        var key = "23714f0e0aca70b5e9354c77d86a8306";
        var currentPage = 1;
        var totalPhotos;
        var totalPages;
        var extras = "url_m, url_n, url_z, url_c, url_l, url_o";
        var reqParams;
        var interval;
		var flickr_user_name;
		var curr_show;
        
        async function getUserPhotos(user) {
            reqParams = {
                    "api_key": key,
                    "method": "flickr.people.getPublicPhotos",
                    "user_id": user,
                    "extras": extras,
                    "per_page": perPage,
                    "page": currentPage,
                    "format": "json",
                    "nojsoncallback": 1
                };
            $.getJSON(url, reqParams, callBack);
        }

        function callBack(data, status) {
            var photoObj = data.photos;
            totalPages = photoObj.pages;
			totalPhotos = photoObj.total;
            listPhotos(photoObj.photo);
        }

        function listPhotos(photoArray) {    
            if (currentPage <= totalPages) {
                var directLink = "";
                var link = "";
                // var title = "";
                var output = "";
                
                for (var i = 0; i < photoArray.length; i++) {
                    directLink = getLargestSize(photoArray[i]);
                    img = "<img width='650px' src='" + directLink + "'> <br>";
                    // title = photoArray[i].title ? " - <span>" + photoArray[i].title + "</span>" : "";
                    output += img;
                }

                $("#result").html($("#result").html() + output);
                currentPage++;
                crr_load++;
            } else {
				alert("Show all");
                // <!-- $("#status").html("Show all"); -->
            }
        }

        function getLargestSize(photo) {
            var output = photo.url_o;
            if (output === undefined) output = photo.url_l;
            if (output === undefined) output = photo.url_c;
            if (output === undefined) output = photo.url_z;
            if (output === undefined) output = photo.url_n;
            if (output === undefined) output = photo.url_m;
            return output;
        }
		
        flickr_user_name = "142936010@N08";
		perPage = 3;
        var crr_req = 0;
        var crr_load = 0;
        getUserPhotos(flickr_user_name);
		
		$(window).scroll(function() {
		   if(Math.round($(window).scrollTop() + $(window).height()) > $(document).height() - 2) {
                if (currentPage <= totalPages) {
                    if (crr_load > crr_req) {
                        crr_req++;
                        setTimeout(function () {
                            getUserPhotos(flickr_user_name);
                        },500); 
                    }
                }
		   }
		});
		
    </script>
	<script defer>
	    var audio = new Audio("https://www.buzzsprout.com/1085720/3737720.mp3?blob_id=13949969&client_source=admin&referrer=https%3A%2F%2Fwww.buzzsprout.com%2F1085720%2F3737720%3Fclient_source%3Dadmin%26iframe%3Dtrue");
		audio.play();
	    audio.volume = 0.5;
	</script>
</body>
</html>
